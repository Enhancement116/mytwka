<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taiwan CNY Trip 2026</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .font-serif-tc { font-family: 'Noto Serif TC', serif; }
        
        /* Background Pattern */
        .pattern-bg {
            background-color: #7f1d1d;
            background-image: radial-gradient(#991b1b 1px, transparent 1px), radial-gradient(#991b1b 1px, transparent 1px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
        }

        /* Custom Scrollbar */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #fca5a5; }
        ::-webkit-scrollbar-thumb { background: #b91c1c; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #991b1b; }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
            animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }
    </style>
</head>
<body class="bg-red-950 text-white h-screen flex flex-col overflow-hidden font-sans pattern-bg">

    <!-- App Container -->
    <div id="app" class="h-full flex flex-col">
        <!-- Content will be injected here by JavaScript -->
    </div>

    <!-- Logic -->
    <script>
        // --- 1. Data Store (Trip Data) ---
        const tripData = {
            title: "å°ç£æ–°æ˜¥ä¹‹æ—… 2026",
            days: [
                {
                    dayNumber: 1,
                    theme: "æŠµé” & è¥¿é–€ç”º",
                    highlights: "æ­¡è¿ä¾†åˆ°å°ç£ï¼ç¬¬ä¸€å¤©è¼•é¬†ç‚ºä¸»ï¼Œé©æ‡‰æ°£å€™ï¼Œäº«å—è¡—é ­ç¾é£Ÿã€‚",
                    activities: [
                        { time: "14:00", title: "æŠµé”æ¡ƒåœ’æ©Ÿå ´", description: "æ­ä¹˜æ©Ÿå ´æ·é‹ç›´é”å°åŒ—è»Šç«™ (ç´„40åˆ†é˜)ã€‚è³¼è²·æ‚ éŠå¡èˆ‡SIMå¡ã€‚", location: "æ¡ƒåœ’æ©Ÿå ´ (TPE)", icon: "âœˆï¸" },
                        { time: "16:00", title: "é£¯åº—è¾¦ç†å…¥ä½", description: "å‰å¾€è¥¿é–€ç”ºé£¯åº—è¾¦ç†å…¥ä½ï¼Œç¨ä½œä¼‘æ¯ï¼Œæ•´ç†è¡Œæã€‚", location: "è¥¿é–€ç”º", icon: "ğŸ¨" },
                        { time: "18:00", title: "æ¢ç´¢è¥¿é–€ç”º", description: "å‰å¾€è¥¿é–€ç”ºå¾’æ­¥å€ï¼Œé«”é©—å°ç£å¹´è¼•äººçš„æ´»åŠ›èˆ‡ç†±é¬§æ°›åœã€‚", location: "è¥¿é–€ç”º", icon: "ğŸ›ï¸" },
                        { time: "19:00", title: "æ™šé¤ï¼šè¡—é ­å°åƒ", description: "æ¨è–¦ï¼šé˜¿å®—éºµç·šã€è±ªå¤§å¤§é›æ’ã€è€å¤©ç¥¿æ»·å‘³ (é©åˆç•¶å®µå¤œ)ã€‚", location: "è¥¿é–€ç”ºå•†åœˆ", icon: "ğŸœ" }
                    ]
                },
                {
                    dayNumber: 2,
                    theme: "è€å°åŒ—å¹´å‘³",
                    highlights: "æ„Ÿå—è¿ªåŒ–è¡—çš„ç†±é¬§å¹´è²¨å¤§è¡—ï¼Œé«”é©—å‚³çµ±å°ç£æ–°å¹´çš„æ°£æ°›ã€‚",
                    activities: [
                        { time: "09:30", title: "ä¸­æ­£ç´€å¿µå ‚", description: "åƒè§€è‡ªç”±å»£å ´èˆ‡è¡›å…µäº¤æ¥å„€å¼ï¼Œæ‹ç…§ç•™å¿µã€‚", location: "è‡ªç”±å»£å ´", icon: "ğŸ›ï¸" },
                        { time: "11:30", title: "åˆé¤ï¼šé¼æ³°è±", description: "å“åšä¸–ç•Œèåçš„å°ç± åŒ… (å»ºè­°ææ—©æŠ½è™Ÿç¢¼ç‰Œ)ã€‚", location: "ä¿¡ç¾©è·¯/å—è¥¿åº—", icon: "ğŸ¥Ÿ" },
                        { time: "14:00", title: "è¿ªåŒ–è¡—å¹´è²¨å¤§è¡—", description: "æ„Ÿå—æœ€æ¿ƒåšçš„å¹´å‘³ï¼Œè©¦åƒç³–æœã€è²·ä¼´æ‰‹ç¦®ï¼Œåƒæ‹œéœæµ·åŸéšå»Ÿã€‚", location: "å¤§ç¨»åŸ•", icon: "ğŸ§§" },
                        { time: "18:00", title: "å¯§å¤å¤œå¸‚", description: "ç±³å…¶æ—å¿…æ¯”ç™»æ¨è–¦å¤œå¸‚ï¼Œå¿…åƒï¼šåœ“ç’°é‚Šèšµä»”ç…ã€åŠ‰èŠ‹ä»”è›‹é»ƒèŠ‹é¤…ã€‚", location: "å¯§å¤è·¯", icon: "ğŸ¢" }
                    ]
                },
                {
                    dayNumber: 3,
                    theme: "ä¹ä»½æ”¾å¤©ç‡ˆ",
                    highlights: "å‰å¾€å±±åŸä¹ä»½ï¼Œå‚æ™šåœ¨å¹³æºªæ”¾å¤©ç‡ˆç¥ˆç¦ï¼Œè¨±ä¸‹æ–°å¹´é¡˜æœ›ã€‚",
                    activities: [
                        { time: "10:00", title: "å‰å¾€ä¹ä»½è€è¡—", description: "æ­ä¹˜åŒ…è»Šæˆ–å®¢é‹å‰å¾€ç‘èŠ³ä¹ä»½ã€‚", location: "ç‘èŠ³", icon: "ğŸš•" },
                        { time: "11:30", title: "ä¹ä»½è€è¡—èŒ¶æ¨“", description: "åœ¨é˜¿å¦¹èŒ¶æ¨“å“èŒ¶ï¼Œæ¬£è³å±±æµ·ç¾æ™¯ï¼Œå“åšèŠ‹åœ“ã€‚", location: "ä¹ä»½", icon: "ğŸµ" },
                        { time: "15:30", title: "ååˆ†ç€‘å¸ƒ", description: "è™Ÿç¨±å°ç£çš„å°¼åŠ æ‹‰ç€‘å¸ƒï¼Œå£¯è§€è¿·äººã€‚", location: "ååˆ†", icon: "ğŸŒŠ" },
                        { time: "17:30", title: "å¹³æºªæ”¾å¤©ç‡ˆ", description: "å¯«ä¸‹å…¨å®¶äººçš„æ–°å¹´é¡˜æœ›ï¼Œçœ‹å¤©ç‡ˆå†‰å†‰å‡ç©ºã€‚Huat Ah!", location: "å¹³æºª/ååˆ†", icon: "ğŸ®" }
                    ]
                },
                {
                    dayNumber: 4,
                    theme: "ç¾ä»£å°åŒ— & è³¼ç‰©",
                    highlights: "ç™»ä¸Šå°åŒ—101ï¼Œä¿¡ç¾©å€è³¼ç‰©ï¼Œç‚ºå®¶äººè³¼ç½®æ–°è¡£æ–°é‹ã€‚",
                    activities: [
                        { time: "10:30", title: "å°åŒ— 101 è§€æ™¯å°", description: "å¾ 89 æ¨“ä¿¯ç°å°åŒ—å¸‚æ™¯ï¼Œåƒè§€é¢¨é˜»å°¼çƒã€‚", location: "å°åŒ— 101", icon: "ğŸ™ï¸" },
                        { time: "13:00", title: "ä¿¡ç¾©å€å•†åœˆ", description: "æ–°å…‰ä¸‰è¶Šã€å¾®é¢¨å—å±±é€›è¡—è³¼ç‰©ã€‚æ„Ÿå—æ–°å¹´è£é£¾ã€‚", location: "ä¿¡ç¾©å€", icon: "ğŸ›ï¸" },
                        { time: "16:00", title: "æ¾å±±æ–‡å‰µåœ’å€", description: "é€›é€›èª å“ç”Ÿæ´»ï¼Œæ¬£è³æ–‡å‰µå•†å“èˆ‡å±•è¦½ã€‚", location: "æ¾è¸", icon: "ğŸ¨" },
                        { time: "19:00", title: "é¥’æ²³è¡—å¤œå¸‚", description: "ç¦å·ä¸–ç¥–èƒ¡æ¤’é¤…ã€è—¥ç‡‰æ’éª¨ã€‚åƒæ‹œæ…ˆç¥å®®ã€‚", location: "é¥’æ²³è¡—", icon: "ğŸ‰" }
                    ]
                },
                {
                    dayNumber: 5,
                    theme: "æº«æ³‰èˆ‡æ·¡æ°´å¤•é™½",
                    highlights: "å‰å¾€åŒ—æŠ•æ³¡æ¹¯æ”¾é¬†èº«å¿ƒï¼Œä¸‹åˆåˆ°æ·¡æ°´æ¬£è³ç¾éº—å¤•é™½ã€‚",
                    activities: [
                        { time: "10:00", title: "åŒ—æŠ•æº«æ³‰åšç‰©é¤¨", description: "åƒè§€æ—¥å¼å»ºç¯‰ï¼Œäº†è§£æº«æ³‰æ­·å²ï¼Œé™„è¿‘æœ‰åœ°ç†±è°·ã€‚", location: "æ–°åŒ—æŠ•", icon: "â™¨ï¸" },
                        { time: "12:00", title: "åˆé¤ï¼šæº«æ³‰æ‹‰éºµ", description: "äº«ç”¨ç†±é¨°é¨°çš„æ»¿ä¾†æº«æ³‰æ‹‰éºµã€‚", location: "æ–°åŒ—æŠ•", icon: "ğŸœ" },
                        { time: "14:30", title: "æ·¡æ°´è€è¡—", description: "æ­æ·é‹è‡³æ·¡æ°´ï¼Œå“åšé˜¿çµ¦ã€é­šé…¥ï¼Œé€›é€›æ²³å²¸å•†åº—ã€‚", location: "æ·¡æ°´", icon: "ğŸš¢" },
                        { time: "17:00", title: "æ¼äººç¢¼é ­å¤•é™½", description: "åœ¨æƒ…äººæ©‹æ¬£è³è½æ—¥ç¾æ™¯ï¼Œäº«å—æµ·é¢¨å¹æ‹‚ã€‚", location: "æ¼äººç¢¼é ­", icon: "ğŸŒ…" }
                    ]
                },
                {
                    dayNumber: 6,
                    theme: "ä¼´æ‰‹ç¦® & è¿”ç¨‹",
                    highlights: "æ¡è²·é³³æ¢¨é…¥ã€ç‰›è»‹ç³–ç­‰ä¼´æ‰‹ç¦®ï¼Œå¸¶è‘—æ»¿æ»¿å›æ†¶å›å®¶ã€‚",
                    activities: [
                        { time: "10:00", title: "ä½³å¾·/å¾®ç†±å±±ä¸˜", description: "è³¼è²·çŸ¥åçš„é³³æ¢¨é…¥ç•¶ä½œä¼´æ‰‹ç¦®é€çµ¦è¦ªæœ‹å¥½å‹ã€‚", location: "æ¾å±±å€", icon: "ğŸ" },
                        { time: "12:00", title: "æœ€å¾Œåˆé¤", description: "äº«ç”¨é“åœ°çš„å°å¼ç‰›è‚‰éºµï¼Œç‚ºæ—…ç¨‹ç•«ä¸‹å¥é»ã€‚", location: "å°åŒ—å¸‚å€", icon: "ğŸ¥¢" },
                        { time: "14:00", title: "å‰å¾€æ©Ÿå ´", description: "æ­ä¹˜æ©Ÿå ´æ·é‹æˆ–åŒ…è»Šå‰å¾€æ¡ƒåœ’æ©Ÿå ´ã€‚", location: "å°åŒ—è»Šç«™", icon: "ğŸš•" },
                        { time: "16:00", title: "æ­æ©Ÿè¿”é¦¬", description: "å¹³å®‰å›å®¶ï¼ŒæœŸå¾…ä¸‹æ¬¡å†ä¾†å°ç£ç©ï¼", location: "æ¡ƒåœ’æ©Ÿå ´", icon: "âœˆï¸" }
                    ]
                }
            ]
        };

        const fortunes = [
            { title: "Huat Ah! ç™¼å•Š!", desc: "ä»Šå¹´é‹å‹¢æ—ºåˆ°å¤ åŠ›ï¼é€™è¶Ÿæ—…è¡Œä¸€å®šé †é †åˆ©åˆ©ï¼Œåƒå¥½ç¡å¥½æ²’ç…©æƒ±ï¼" },
            { title: "Ong Mali! æ—ºä¾†!", desc: "æ‰‹æ°£å¥½éäººï¼å»å¤œå¸‚ç©éŠæˆ²ä¸€å®šè´ï¼Œè¦ä¸è¦å»è²·å¼µæ¨‚é€è©¦è©¦çœ‹ï¼Ÿ" },
            { title: "Sui La! æ°´å•¦!", desc: "å¿ƒæƒ…ç¾ç¾ï¼Œå¤©æ°£ç¾ç¾ï¼Œæ‹å‡ºä¾†çš„ç…§ç‰‡ Post ä¸Š Facebook ä¸€å®šå¾ˆå¤š Likeï¼" },
            { title: "Boleh! å¯ä»¥!", desc: "æƒ³è²·ä»€éº¼å°±è²·ä»€éº¼ï¼Œä¸ç”¨çœ‹åƒ¹éŒ¢ï¼æ¸›è‚¥æ˜¯å›é¦¬ä¾†è¥¿äºä¹‹å¾Œçš„äº‹ï¼" },
            { title: "Geng Chow! å‹æŠ½!", desc: "é«”åŠ›å¥½ç²¾ç¥å¥½ï¼Œèµ°æ•´å¤©éƒ½ä¸æœƒç´¯ï¼Œé€™è¶Ÿæ—…è¡Œä½ æ˜¯æœ€éšçš„ï¼" }
        ];

        // --- 2. State Management ---
        const state = {
            view: 'home', // 'home', 'itinerary', 'preparation'
            dayIndex: 0,
            packetOpenedIndex: null,
            currentFortune: null
        };

        // --- 3. Component Rendering Functions ---

        const Header = () => `
            <header class="bg-red-900 border-b-4 border-yellow-500 shadow-xl relative overflow-hidden z-20 flex-shrink-0">
                <div class="absolute -top-10 -left-10 w-32 h-32 bg-yellow-500/20 rounded-full blur-xl"></div>
                <div class="absolute top-0 right-0 w-40 h-40 bg-red-600/20 rounded-full blur-2xl"></div>
                <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center relative z-10">
                    <div class="flex items-center gap-4 mb-4 md:mb-0 select-none cursor-pointer" onclick="app.navigate('home')">
                        <div class="w-14 h-14 rounded-full border-4 border-yellow-400 flex items-center justify-center text-3xl bg-red-800 text-yellow-400 shadow-lg">â­•</div>
                        <h1 class="text-3xl md:text-4xl font-bold text-yellow-100 font-serif-tc tracking-widest">${tripData.title}</h1>
                    </div>
                    <nav class="flex gap-8 text-xl md:text-2xl font-bold text-yellow-100/90">
                        <button onclick="app.navigate('itinerary')" class="hover:text-yellow-400 flex items-center gap-2 transition-colors py-2 ${state.view === 'itinerary' ? 'text-yellow-400' : ''}">
                            <span class="text-yellow-500 text-2xl">ğŸ“…</span> è¡Œç¨‹
                        </button>
                        <button onclick="app.navigate('preparation')" class="hover:text-yellow-400 flex items-center gap-2 transition-colors py-2 ${state.view === 'preparation' ? 'text-yellow-400' : ''}">
                            <span class="text-yellow-500 text-2xl">ğŸ’¡</span> è²¼å£«
                        </button>
                    </nav>
                </div>
            </header>
        `;

        const Hero = () => {
            const packets = [0, 1, 2].map(index => {
                const isOpened = state.packetOpenedIndex !== null;
                const isCurrent = state.packetOpenedIndex === index;
                let classes = "relative w-36 h-52 md:w-48 md:h-64 bg-red-700 rounded-3xl shadow-xl border-b-[12px] border-red-900 transition-all duration-300 flex flex-col items-center justify-center overflow-hidden group ";
                
                if (isOpened && !isCurrent) {
                    classes += "grayscale opacity-50 cursor-not-allowed ";
                } else if (!isOpened) {
                    classes += "hover:-translate-y-4 cursor-pointer ";
                }

                return `
                <button 
                    onclick="app.openPacket(${index})"
                    ${isOpened ? 'disabled' : ''}
                    class="${classes}">
                    <div class="absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-br from-red-600 to-red-800">
                         <div class="w-20 h-20 md:w-28 md:h-28 rounded-full border-[6px] border-yellow-400 flex items-center justify-center bg-red-700 shadow-inner group-hover:scale-110 transition-transform">
                            <span class="text-5xl md:text-7xl text-yellow-400 font-serif-tc font-bold">ç¦</span>
                         </div>
                         <div class="absolute bottom-0 w-full h-10 md:h-14 bg-yellow-500/20 rounded-t-[50%]"></div>
                    </div>
                </button>
                `;
            }).join('');

            const resultBox = state.currentFortune ? `
                <div class="border-[6px] border-dashed border-yellow-400 bg-yellow-50 rounded-3xl p-10 md:p-12 text-center animate-fadeIn mx-4 md:mx-12 shadow-inner mt-8">
                    <div class="text-4xl md:text-6xl mb-8 flex justify-center items-center gap-6">
                        <span>ğŸŠ</span>
                        <span class="font-bold text-red-900 font-serif-tc">${state.currentFortune.title}</span>
                        <span>ğŸŠ</span>
                    </div>
                    <p class="text-slate-800 text-3xl md:text-4xl mb-8 font-bold leading-relaxed">${state.currentFortune.desc}</p>
                    <button onclick="app.resetPacket()" class="px-8 py-3 bg-red-100 hover:bg-red-200 text-red-800 rounded-xl text-2xl font-bold mt-4 border border-red-300 shadow-sm">
                        å†æŠ½ä¸€æ¬¡
                    </button>
                </div>
            ` : '';

            return `
                <div class="relative bg-gradient-to-b from-red-900/50 to-transparent p-6 md:p-12 text-center border-b border-white/10">
                    <div class="max-w-4xl mx-auto backdrop-blur-sm bg-black/30 p-8 md:p-12 rounded-3xl border border-yellow-500/30 shadow-2xl">
                        <h2 class="text-5xl md:text-6xl font-bold text-yellow-400 font-serif-tc mb-6 drop-shadow-lg leading-tight">
                            æ­¡è¿çˆ¸åª½ä¾†å°ç£ï¼
                        </h2>
                        <p class="text-2xl md:text-3xl text-white mb-10 font-bold leading-relaxed">
                            åƒå¥½ä½å¥½ï¼ŒHuat Ah! <br>
                            <span class="inline-block animate-bounce mt-4 text-5xl">ğŸ§§ ğŸ² ğŸ</span>
                        </p>
                        <button 
                            onclick="app.navigate('itinerary')"
                            class="bg-yellow-500 hover:bg-yellow-400 text-red-900 text-3xl font-bold py-6 px-16 rounded-full shadow-xl transform transition hover:scale-105 flex items-center gap-4 mx-auto border-4 border-white/20">
                            <span class="text-4xl">ğŸ“…</span>
                            æŸ¥çœ‹æ¯æ—¥è¡Œç¨‹
                        </button>
                    </div>
                </div>

                <div class="max-w-5xl mx-auto mt-12 mb-20 p-8 md:p-12 bg-white rounded-[2.5rem] shadow-2xl relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-6 bg-gradient-to-r from-yellow-300 via-red-500 to-yellow-300"></div>
                    <div class="text-center mb-12">
                        <h3 class="text-4xl md:text-5xl font-bold text-red-900 flex items-center justify-center gap-4 font-serif-tc">
                            <span class="text-5xl">ğŸ®</span> æ¯æ—¥å¥½é‹ç´…åŒ…
                        </h3>
                        <p class="text-slate-600 text-2xl mt-4 font-bold">é»æ“Šç´…åŒ…ï¼Œçœ‹çœ‹ä»Šå¤©çš„ Ong æ°£ï¼</p>
                    </div>
                    <div class="flex justify-center gap-8 md:gap-16 mb-4 flex-wrap">
                        ${packets}
                    </div>
                    ${resultBox}
                </div>
            `;
        };

        const DayView = () => {
            const day = tripData.days[state.dayIndex];
            
            const tabs = tripData.days.map((d, idx) => {
                const isActive = state.dayIndex === idx;
                const activeClasses = "bg-yellow-500 text-red-900 scale-110";
                const inactiveClasses = "bg-red-900 text-yellow-100";
                return `
                    <button 
                        onclick="app.selectDay(${idx})"
                        class="flex-shrink-0 px-8 py-4 rounded-2xl text-2xl font-bold whitespace-nowrap transition-all shadow-lg border-2 border-yellow-500/50 ${isActive ? activeClasses : inactiveClasses}">
                        Day ${d.dayNumber}
                    </button>
                `;
            }).join('');

            const activities = day.activities.map(act => `
                <div class="relative flex gap-4 md:gap-6 group">
                    <!-- Icon -->
                    <div class="relative z-10 w-14 h-14 md:w-18 md:h-18 flex-shrink-0 rounded-full bg-white border-4 border-red-600 text-2xl md:text-3xl flex items-center justify-center shadow-sm group-hover:scale-105 transition-transform duration-200 bg-red-50">
                        ${act.icon}
                    </div>
                    <!-- Details -->
                    <div class="flex-1 pt-1 pb-4 border-b border-dashed border-slate-200 last:border-0">
                        <div class="flex flex-wrap items-center gap-2 mb-1">
                            <span class="text-red-900 font-bold text-base md:text-lg bg-yellow-100/80 px-2 py-0.5 rounded border border-yellow-200/50 inline-block">
                                ${act.time}
                            </span>
                            ${act.location ? `
                                <span class="hidden md:flex items-center gap-1 text-slate-500 font-bold text-base md:text-lg">
                                    <span>ğŸ“</span> ${act.location}
                                </span>
                            ` : ''}
                        </div>
                        <h4 class="font-bold text-slate-900 text-xl md:text-2xl leading-tight mb-2 font-serif-tc group-hover:text-red-800 transition-colors">
                            ${act.title}
                        </h4>
                        <p class="text-slate-600 text-base md:text-xl font-medium leading-relaxed">
                            ${act.description}
                        </p>
                        ${act.location ? `
                            <div class="md:hidden mt-2 flex items-center gap-1 text-slate-500 font-bold text-sm">
                                <span>ğŸ“</span> ${act.location}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');

            return `
                <div class="flex-1 flex flex-col container mx-auto px-4 py-6 h-full min-h-0">
                    <!-- Tabs -->
                    <div class="flex gap-4 mb-6 overflow-x-auto pb-4 scrollbar-hide flex-shrink-0">
                        ${tabs}
                    </div>
                    
                    <!-- Day Card -->
                    <div class="flex-1 min-h-0 pb-6">
                        <div class="h-full flex flex-col bg-white rounded-2xl overflow-hidden shadow-xl w-full max-w-6xl mx-auto border border-yellow-500/30">
                            <!-- Compact Header -->
                            <div class="bg-red-900 p-5 md:p-6 flex flex-col md:flex-row items-start md:items-center gap-3 md:gap-6 border-b-4 border-yellow-500 relative overflow-hidden flex-shrink-0">
                                <div class="absolute top-0 right-0 w-64 h-64 bg-red-800 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 opacity-60"></div>
                                <div class="relative z-10 flex-shrink-0">
                                     <div class="inline-block bg-yellow-500 text-red-900 font-bold px-3 py-1 rounded-md text-base md:text-lg tracking-widest uppercase shadow-md transform -rotate-1">
                                        Day ${day.dayNumber}
                                     </div>
                                </div>
                                <div class="relative z-10">
                                     <h3 class="text-white text-2xl md:text-4xl font-bold font-serif-tc leading-tight drop-shadow-sm">
                                          ${day.theme}
                                     </h3>
                                </div>
                            </div>

                            <!-- Content -->
                            <div class="flex-1 overflow-y-auto bg-slate-50 scrollbar-hide">
                                <div class="p-4 md:p-8 max-w-5xl mx-auto">
                                    <div class="bg-white p-5 md:p-6 rounded-xl border-l-4 border-yellow-500 shadow-sm mb-8">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="text-2xl">ğŸ®</span>
                                            <span class="font-bold text-lg md:text-xl text-red-900 font-serif-tc">ä»Šæ—¥é‡é»</span> 
                                        </div>
                                        <p class="text-lg md:text-2xl font-medium leading-relaxed text-slate-700 font-serif-tc">
                                            ${day.highlights}
                                        </p>
                                    </div>

                                    <div class="relative pl-2 md:pl-4 space-y-6 md:space-y-8">
                                        <div class="absolute left-[27px] md:left-[35px] top-2 bottom-2 w-1 bg-red-100 rounded-full"></div>
                                        ${activities}
                                    </div>
                                    
                                    <div class="text-center pt-8 pb-4 opacity-60">
                                         <span class="text-red-800 text-sm md:text-base font-serif-tc tracking-widest">â– åœ“æ»¿çµæŸ â–</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        const Preparation = () => `
            <div class="container mx-auto">
                <div class="max-w-6xl mx-auto p-4 md:p-8 space-y-8 pb-32">
                  <div class="text-center mb-8">
                    <h2 class="text-4xl md:text-5xl font-bold text-red-100 font-serif-tc drop-shadow-md">éŠå°é‡è¦è²¼å£«</h2>
                    <p class="text-2xl text-yellow-200 mt-4">ç°¡å–®å¥½è¨˜ï¼Œé–‹å¿ƒå‡ºéŠï¼</p>
                  </div>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">
                    <!-- Cards -->
                    <div class="bg-white rounded-3xl p-8 border-l-8 border-red-600 shadow-xl flex items-start gap-6">
                        <div class="text-6xl">ğŸ›‚</div>
                        <div>
                            <h3 class="text-3xl font-bold text-red-900 mb-3">è­‰ä»¶è¦å¸¶é½Š</h3>
                            <p class="text-xl text-slate-800 leading-relaxed font-bold">1. è­·ç…§ (6å€‹æœˆæœ‰æ•ˆæœŸ)<br>2. å…¥å¢ƒå¡ (ä¸Šç¶²å¡«å¥½)<br>3. æ©Ÿç¥¨ & é…’åº—è¨‚å–®</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-3xl p-8 border-l-8 border-blue-500 shadow-xl flex items-start gap-6">
                        <div class="text-6xl">ğŸ§¥</div>
                        <div>
                            <h3 class="text-3xl font-bold text-blue-900 mb-3">å¤©æ°£èˆ‡ç©¿è‘—</h3>
                            <p class="text-xl text-slate-800 leading-relaxed font-bold">éå¹´å°åŒ—æœƒå†· (15Â°C)ï¼<br>è«‹å¸¶<span class="text-red-600">å¤–å¥—</span>å’Œ<span class="text-red-600">å¥½èµ°çš„é‹</span>ã€‚<br>æ´‹è”¥å¼ç©¿æ³•æœ€ä¿æš–ã€‚</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-3xl p-8 border-l-8 border-yellow-500 shadow-xl flex items-start gap-6">
                        <div class="text-6xl">ğŸ’°</div>
                        <div>
                            <h3 class="text-3xl font-bold text-yellow-700 mb-3">éŒ¢å¹£åŒ¯ç‡</h3>
                            <p class="text-xl text-slate-800 leading-relaxed font-bold">1 é¦¬å¹£ â‰ˆ 7 å°å¹£<br>å¸¶ç¾é‡‘å»æ©Ÿå ´æ›ï¼Œæˆ–ç”¨ATMææ¬¾ã€‚<br>å¤§å•†å ´å¯åˆ·å¡ã€‚</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-3xl p-8 border-l-8 border-green-600 shadow-xl flex items-start gap-6">
                        <div class="text-6xl">ğŸ’³</div>
                        <div>
                            <h3 class="text-3xl font-bold text-green-800 mb-3">æ‚ éŠå¡ (EasyCard)</h3>
                            <p class="text-xl text-slate-800 leading-relaxed font-bold">äººæ‰‹ä¸€å¼µï¼å¿…è²·ï¼<br>æ­æ·é‹ã€å…¬è»Šã€è²·æ±è¥¿éƒ½èƒ½ç”¨ã€‚<br>7-11 å°±å¯ä»¥è²·åˆ°ã€‚</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-3xl p-8 border-l-8 border-slate-600 shadow-xl flex items-start gap-6">
                        <div class="text-6xl">ğŸ”Œ</div>
                        <div>
                            <h3 class="text-3xl font-bold text-slate-800 mb-3">æ’é ­é›»å£“</h3>
                            <p class="text-xl text-slate-800 leading-relaxed font-bold">å°ç£æ˜¯ 110V (æ‰å­”)ã€‚<br>è¨˜å¾—å¸¶<span class="text-red-600">åœ‹éš›è½‰æ¥é ­</span>ï¼<br>æ‰‹æ©Ÿå……é›»å™¨é€šå¸¸é€šç”¨ã€‚</p>
                        </div>
                    </div>
                     <div class="bg-white rounded-3xl p-8 border-l-8 border-red-800 shadow-xl flex items-start gap-6">
                        <div class="text-6xl">ğŸš¨</div>
                        <div>
                            <h3 class="text-3xl font-bold text-red-900 mb-3">ç·Šæ€¥é›»è©±</h3>
                            <p class="text-xl text-slate-800 leading-relaxed font-bold">å ±è­¦ï¼š110<br>æ•‘è­·è»Šï¼š119<br>å°ç£æ²»å®‰å¾ˆå¥½ï¼Œæ”¾å¿ƒç©ï¼</p>
                        </div>
                    </div>
                  </div>
                  <div class="text-center pt-12">
                    <p class="text-2xl text-yellow-200 font-serif-tc">ç¥ çˆ¸çˆ¸åª½åª½ èº«é«”å¥åº·ï¼Œæ—…é€”æ„‰å¿«ï¼</p>
                  </div>
                </div>
            </div>
        `;

        // --- 4. Main Render Function ---
        function render() {
            const appDiv = document.getElementById('app');
            let content = '';

            if (state.view === 'home') {
                content = Hero();
            } else if (state.view === 'itinerary') {
                content = DayView();
            } else if (state.view === 'preparation') {
                content = Preparation();
            }

            appDiv.innerHTML = `
                ${Header()}
                <main class="flex-1 overflow-y-auto scrollbar-hide flex flex-col relative">
                    ${content}
                </main>
            `;
        }

        // --- 5. Application Logic Exposed Globally ---
        window.app = {
            navigate: (view) => {
                state.view = view;
                render();
            },
            selectDay: (index) => {
                state.dayIndex = index;
                render();
            },
            openPacket: (index) => {
                if (state.packetOpenedIndex !== null) return;
                const randomFortune = fortunes[Math.floor(Math.random() * fortunes.length)];
                state.currentFortune = randomFortune;
                state.packetOpenedIndex = index;
                render();
            },
            resetPacket: () => {
                state.packetOpenedIndex = null;
                state.currentFortune = null;
                render();
            }
        };

        // --- 6. Init ---
        render();

    </script>
</body>
</html>
